<script>
    import { onMount } from 'svelte';

    export let data

    let markerSvgString = `
            <svg width="130" height="130" viewBox="0 0 130 130" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="65" cy="65" r="13" fill="#847748"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M34.096 94.8976V93.9228C35.1689 93.5167 36.7905 93.0293 36.9052 93.0049C37.0444 92.9724 37.3065 92.9968 37.3065 93.1349V95.0519C38.707 93.6466 39.8945 93.0049 40.7136 93.0049C42.5645 93.0049 43.4245 95.32 43.4245 97.2533V104.458C43.4245 104.865 43.6866 105.425 43.9896 105.425H44.7595V106.522H40.5334V105.425H41.1722C41.508 105.425 41.8847 104.808 41.8847 104.483V97.3589C41.8847 96.1973 41.4916 94.5483 39.7471 94.6539C38.7152 94.7189 37.8634 95.4256 37.3065 96.506V104.458C37.3065 104.865 37.6668 105.425 37.9699 105.425H38.6251V106.522H34.4154V105.425H35.0542C35.39 105.425 35.7667 104.808 35.7667 104.483V95.6693C35.7667 95.2225 35.4146 94.8976 35.1607 94.8976H34.0878H34.096ZM47.2329 103.118V94.9626H45.644V93.5735C46.1763 93.5898 46.7005 93.606 47.2329 93.6223V90.3812L48.7972 89.3658V93.6466C49.9028 93.6466 51.0167 93.6954 52.1387 93.6304V94.9869L48.7972 95.0032V103.232C48.7972 104.588 49.4933 105.108 50.3779 105.108C50.8529 105.108 51.3689 105.076 52.0486 104.759V105.986C51.2788 106.335 50.4352 106.53 49.3705 106.53C49.1821 106.53 48.5433 106.449 47.9454 105.986C47.2574 105.458 47.2329 104.093 47.2329 103.11V103.118ZM102.377 85.223V83.9883L105.317 83.574C105.497 83.5496 105.686 83.6877 105.686 84.0451V95.3606C106.98 93.2892 108.413 93.0861 109.24 93.0861C111.091 93.0861 111.951 95.3037 111.951 97.2452V104.45C111.951 104.857 112.213 105.417 112.516 105.417H113.286V106.514H109.06V105.417H109.699C110.035 105.417 110.411 104.8 110.411 104.475V97.6026C110.411 96.441 109.871 94.7676 108.118 94.8814C107.086 94.9463 106.234 95.7424 105.677 96.8228V104.45C105.677 104.857 106.038 105.417 106.341 105.417H106.996V106.514H102.786V105.417H103.425C103.761 105.417 104.138 104.8 104.138 104.475V86.1815C104.138 85.4748 103.72 85.223 103.171 85.223H102.36H102.377ZM86.2259 94.9301V93.8741C87.3562 93.6954 88.6911 92.9724 88.8058 92.9481C89.0106 92.8993 89.289 93.013 89.289 93.3786V98.0575C89.6658 96.6197 90.0179 95.7749 90.4602 94.8326C91.0253 93.6223 91.7051 92.9156 92.4094 92.9074C93.3185 92.9074 93.6953 93.5492 93.7035 94.4346C93.7035 94.9545 92.7534 95.5474 92.4995 95.3525C92.3439 95.1738 92.0737 95.1413 91.8361 95.1575C90.6568 95.2306 89.6658 98.3418 89.2972 100.202V104.45C89.2972 104.857 89.6576 105.417 89.9606 105.417H91.3284V106.514H86.4061V105.417H87.0449C87.3807 105.417 87.7575 104.8 87.7575 104.475V95.7668C87.7575 95.3769 87.3643 94.9301 86.9794 94.9301H86.2341H86.2259ZM15.9139 102.753C15.9139 104.215 17.3226 105.116 18.7231 105.116C21.2703 105.116 21.9664 103.053 21.95 100.827C21.9337 99.0241 21.3767 97.627 18.8788 96.2541C16.6347 95.0113 15.2096 93.2161 15.2096 90.5761C15.2096 87.0832 17.3063 84.7925 20.6069 84.7925C21.4996 84.7925 22.9083 84.9874 23.5062 85.2961V90.0968H22.3759L22.2858 87.733C22.2449 86.7339 21.172 86.1572 20.2219 86.1409C18.4529 86.1003 17.0687 88.1311 17.0687 89.8775C17.0687 92.0058 17.6666 92.9481 20.1073 94.2721C22.4333 95.5393 23.8665 97.5214 23.8665 100.121C23.8665 102.062 23.5553 104.012 22.0811 105.279C20.9263 106.27 19.3784 106.57 17.8386 106.57C16.9541 106.57 15.6846 106.148 14.8574 105.693L14.9311 100.779C15.2096 100.762 15.6027 100.771 15.9058 100.771V102.753H15.9139ZM57.405 100.519L58.7318 100.397V103.386C58.4779 103.671 57.9046 104.296 57.5852 104.475C56.8317 104.897 55.8489 105.1 55.2592 104.613C54.5057 103.987 54.5876 102.249 55.0708 101.656C55.6031 100.998 56.5122 100.6 57.4132 100.527L57.405 100.519ZM58.8464 104.767L58.8792 105.839C58.8874 106.172 59.1003 106.392 59.5753 106.392H61.5737V105.295H61.0086C60.5418 105.295 60.2551 104.848 60.2551 104.255V96.904C60.2387 94.199 58.8055 93.078 57.2739 93.078C55.5868 93.0943 54.3828 94.9707 53.7276 96.0105L54.4893 96.5628C55.3656 95.2306 56.1437 94.5239 57.0364 94.5239C58.3059 94.4996 58.7318 95.4662 58.7318 96.506V99.3247C57.0692 99.3897 54.7432 99.5927 53.6375 101.347C52.9332 102.476 52.9168 104.231 53.5966 105.344C54.0552 106.091 54.8415 106.457 55.8243 106.449C56.4877 106.449 57.0692 106.254 57.749 105.758C58.0274 105.555 58.5516 105.108 58.8382 104.759L58.8464 104.767ZM29.0836 100.519L30.4104 100.397V103.386C30.1565 103.671 29.5832 104.296 29.2638 104.475C28.5103 104.897 27.5275 105.1 26.9378 104.613C26.1843 103.987 26.2662 102.249 26.7494 101.656C27.2818 100.998 28.1909 100.6 29.0918 100.527L29.0836 100.519ZM30.5251 104.767L30.5578 105.839C30.566 106.172 30.779 106.392 31.254 106.392H33.2524V105.295H32.6873C32.2204 105.295 31.9338 104.848 31.9338 104.255V96.904C31.9174 94.199 30.4841 93.078 28.9526 93.078C27.2654 93.0943 26.0615 94.9707 25.4063 96.0105L26.1679 96.5628C27.0443 95.2306 27.8223 94.5239 28.7151 94.5239C29.9845 94.4996 30.4104 95.4662 30.4104 96.506V99.3247C28.7478 99.3897 26.4218 99.5927 25.3162 101.347C24.6118 102.476 24.5954 104.231 25.2752 105.344C25.7339 106.091 26.5201 106.457 27.5029 106.449C28.1663 106.449 28.7478 106.254 29.4276 105.758C29.7061 105.555 30.2302 105.108 30.5169 104.759L30.5251 104.767ZM81.0743 100.519L82.4011 100.397V103.386C82.1473 103.671 81.5739 104.296 81.2545 104.475C80.501 104.897 79.5182 105.1 78.9285 104.613C78.1751 103.987 78.257 102.249 78.7402 101.656C79.2725 100.998 80.1816 100.6 81.0825 100.527L81.0743 100.519ZM82.5158 104.767L82.5486 105.839C82.5568 106.172 82.7697 106.392 83.2447 106.392H85.2431V105.295H84.678C84.2112 105.295 83.9245 104.848 83.9245 104.255V96.904C83.9081 94.199 82.4749 93.078 80.9433 93.078C79.2561 93.0943 78.0522 94.9707 77.397 96.0105L78.1587 96.5628C79.035 95.2306 79.8131 94.5239 80.7058 94.5239C81.9753 94.4996 82.4011 95.4662 82.4011 96.506V99.3247C80.7386 99.3897 78.4126 99.5927 77.3069 101.347C76.6026 102.476 76.5862 104.231 77.266 105.344C77.7246 106.091 78.5109 106.457 79.4937 106.449C80.1571 106.449 80.7386 106.254 81.4183 105.758C81.6968 105.555 82.221 105.108 82.5076 104.759L82.5158 104.767ZM67.7736 102.744C67.7736 104.207 69.1823 105.108 70.5828 105.108C73.13 105.108 73.8261 103.045 73.8097 100.819C73.7934 99.016 73.2364 97.6188 70.7384 96.246C68.4944 95.0032 67.0693 93.208 67.0693 90.568C67.0693 87.0751 69.166 84.7844 72.4666 84.7844C73.3593 84.7844 74.768 84.9793 75.3659 85.288V90.0887H74.2356L74.1455 87.7249C74.1046 86.7258 73.0317 86.149 72.0816 86.1328C70.3126 86.0922 68.9284 88.1229 68.9284 89.8694C68.9284 91.9976 69.5263 92.9399 71.967 94.264C74.293 95.5312 75.7262 97.5132 75.7262 100.113C75.7262 102.054 75.415 104.004 73.9408 105.271C72.786 106.262 71.238 106.562 69.6983 106.562C68.8138 106.562 67.5443 106.14 66.7171 105.685L66.7908 100.771C67.0693 100.754 67.4624 100.762 67.7654 100.762V102.744H67.7736ZM97.7658 100.511L99.0926 100.389V103.378C98.8387 103.662 98.2654 104.288 97.9459 104.467C97.1925 104.889 96.2096 105.092 95.62 104.605C94.8665 103.979 94.9484 102.241 95.4316 101.648C95.9639 100.99 96.873 100.592 97.774 100.519L97.7658 100.511ZM99.2072 104.759L99.24 105.831C99.2482 106.164 99.4611 106.384 99.9361 106.384H101.935V105.287H101.369C100.903 105.287 100.616 104.84 100.616 104.247V96.8959C100.6 94.1909 99.1663 93.0699 97.6347 93.0699C95.9476 93.0861 94.7436 94.9626 94.0884 96.0023L94.8501 96.5547C95.7264 95.2225 96.5045 94.5158 97.3972 94.5158C98.6667 94.4914 99.0926 95.4581 99.0926 96.4978V99.3166C97.43 99.3815 95.104 99.5846 93.9983 101.339C93.294 102.468 93.2776 104.223 93.9574 105.336C94.416 106.083 95.2023 106.449 96.1851 106.441C96.8485 106.441 97.43 106.246 98.1097 105.75C98.3882 105.547 98.9124 105.1 99.199 104.751L99.2072 104.759Z" fill="#847748"/>
            </svg>
    `


    let map;

    async function initMap() {
        // The location of Uluru
        const parser = new DOMParser();

        const position = { lat: 42.79225634956583, lng: 27.567548227983494 };

        // Request needed libraries.
        //@ts-ignore
        const { Map } = await google.maps.importLibrary("maps");
        const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");

        let pinSvg = parser.parseFromString(markerSvgString, "image/svg+xml").documentElement

        // The map, centered at Uluru
        map = new Map(document.getElementById("map"), {
            zoom: 14.5,
            center: position,
            mapId: "eec3baf5b39d9ce0",
        });

        // The marker, positioned at Uluru
        const marker = new AdvancedMarkerElement({
            map: map,
            position: position,
            content: pinSvg,
            title: "Hello World!",
        });
    }
    onMount(()=>{
        initMap();
    })
</script>

<section>
    <div class="section-wrapper">
        <h1>{data.contact.heroHeading}</h1>
        <div class="contact-grid-wrapper">
            <div class="contacts-wrapper">
                <p>{data.contact.addressLine1}</p>
                <p>{data.contact.addressLine2}</p>
                <p>{data.contact.addressLine3}</p>
            </div>
            <div class="contacts-wrapper">
                <a href="tel:{data.contact.phoneNumber}" target="_blank">
                    <p>{data.contact.phoneNumber}</p>
                </a>
                <a href="mailto:{data.contact.email}" target="_blank">
                    <p>{data.contact.email}</p>
                </a>
                <p>{data.contact.website}</p>
            </div>
        </div>
        <div id="map">
        </div>
    </div>
</section>

<style>
    .section-wrapper {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        justify-content: center;
        align-items: center;
        gap: 10vh;
        padding-top: 30vh;
        padding-bottom: 10vh;
    }

    h1 {
        font-size: 40px;
        color: var(--gray-color);
    }

    .contact-grid-wrapper {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-gap: 10vw;
    }

    p {
        font-style: italic;
        text-align: center;
    }

    .contacts-wrapper {
        display: flex;
        flex-direction: column;
        gap: 1vh
    }

    #map {
        width: 100%;
        height: 40vh;
        filter: grayscale(30%);
    }


    @media only screen and (max-width: 765px) {
        .contact-grid-wrapper {
            grid-template-columns: 1fr;
        }

        #map {
            height: 50vh;
        }

        .section-wrapper {
            padding-top: 15vh;
            gap: 7vh
        }

        h1 {
            font-size: 30px;
        }
    }
</style>